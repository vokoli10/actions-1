name: Exploring variables and secrets

on: 
   push

env:
  CONTAINER_REGISTRY: docker.io
  DOCKER_USERNAME: victorokoli
  IMAGE_NAME: github-actions-nginx   

# jobs:
#   docker:
#     runs-on: ubuntu-latest
#     steps: 
#     - name: Docker Build
#       run: docker build -t docker.io/dockerUsername/imageName:latest

#     - name: Docker Login
#       run:  docker login --username=dockerUsername --password=ThaGreatest10

#     - name: Docker Publish
#       run: docker push docker.io/dockerUsername/imageName:latest      

#   deploy:
#     needs: docker
#     runs-on: ubuntu-latest
#     steps:    
#     - name: Docker Run 
#       run: docker run -d -p 8080:80 docker.io/dockerUsername/imageName:latest

Jobs:
   docker:
     runs-on: ubuntu-latest

     steps:
     - name: Docker Build
       run: echo dockerbuild -t $CONTAINER_REGISTRY/$DOCKER_USERNAME/$IMAGE_NAME:latest

     - name: Docker Login
       env:
         DOCKER_PASSWORD: ThaGreatest10
       run: echo docker login --username=$DOCKER_USERNAME --password=$DOCKER_PASSWORD

     - name: Docker Publish
       run: docker push $CONTAINER_REGISTRY/$DOCKER_USERNAME/$IMAGE_NAME:latest

    deploy:
      needs: docker
      run: docker run -d -p 8080:80 $CONTAINER_REGISTRY/$DOCKER_NAME/$IMAGE_NAME:latest  


             

